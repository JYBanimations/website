---
interface Props {
  image: string;
  size?: string;
  borderRadius?: string;
  link?: string;
}
const { image, size = '200px', borderRadius = '20px', link } = Astro.props;
---

<div class="image-card" style={`width: ${size}; height: ${size}; border-radius: ${borderRadius};`}>
  <div class="background" style={`background-image: url(${image});`}></div>
  {link && (
    <a href={link} target="_blank" class="hover-icon">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white" width="40" height="40">
        <path d="M23.498 6.186a2.998 2.998 0 0 0-2.11-2.116C19.83 3.5 12 3.5 12 3.5s-7.83 0-9.388.57a2.998 2.998 0 0 0-2.11 2.116A31.47 31.47 0 0 0 0 12a31.47 31.47 0 0 0 .502 5.814 2.998 2.998 0 0 0 2.11 2.116C4.17 20.5 12 20.5 12 20.5s7.83 0 9.388-.57a2.998 2.998 0 0 0 2.11-2.116A31.47 31.47 0 0 0 24 12a31.47 31.47 0 0 0-.502-5.814zM9.75 15.02V8.98L15.5 12l-5.75 3.02z"/>
      </svg>
    </a>
  )}
</div>

<style>
.image-card {
  position: relative;
  overflow: hidden;
  border-radius: inherit;
  aspect-ratio: 1 / 1;
  cursor: pointer;
}

/* Background image layer */
.background {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  transition: filter 0.3s ease;
  border-radius: inherit;
  z-index: 1;
}

/* Blur background on hover */
.image-card:hover .background {
  filter: blur(4px);
}

/* Icon layer above background */
.hover-icon {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  opacity: 0;
  transition: opacity 0.3s ease;
  z-index: 2; /* ensure icon is above background */
}

.image-card:hover .hover-icon {
  opacity: 1;
}
</style>